<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeGPT</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        #chat-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            margin: 10px;
            border-radius: 5px;
        }

        .message {
            margin: 10px 0;
        }

        .user {
            text-align: right;
            color: #0078d7;
        }

        .bot {
            text-align: left;
            color: #333;
        }

        #input-container {
            display: flex;
            margin: 10px;
        }

        #user-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 10px;
        }

        #send-button {
            padding: 10px 20px;
            background-color: #0078d7;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #send-button:hover {
            background-color: #005bb5;
        }

        #welcome-message {
            font-size: 20px;
            font-weight: bold;
            margin: 20px;
            text-align: center;
            visibility: hidden;
        }
    </style>
</head>
<body>
    <div id="welcome-message"></div>
    <div id="chat-container"></div>

    <div id="input-container">
        <input type="text" id="user-input" placeholder="Type your message here..." />
        <button id="send-button">Send</button>
    </div>

    <script>
        // Obfuscate the API key using Base64 encoding
        const apiKeyBase64 = "c2stcHJvai14anJORy1Ocm1YVEpT...";
        const apiKey = atob(apiKeyBase64); // Decoding the Base64 API key

        const apiEndpoint = "https://hidden-api-endpoint.com";  // Changed endpoint
        const chatContainer = document.getElementById("chat-container");
        const userInput = document.getElementById("user-input");
        const sendButton = document.getElementById("send-button");
        const welcomeMessage = document.getElementById("welcome-message");

        const badWords = ["fuck", "motherchod", "motherfucker", "fuck you"]; // Add more bad words as needed
        const localStorageKey = "PrimeGPTUserName";

        let isFirstVisit = !localStorage.getItem(localStorageKey);

        // Typewriter effect function
        function typeWriterEffect(text, element, callback) {
            let i = 0;
            element.style.visibility = "visible";
            const interval = setInterval(() => {
                element.textContent += text.charAt(i);
                i++;
                if (i >= text.length) {
                    clearInterval(interval);
                    if (callback) callback();
                }
            }, 100);
        }

        // Function to send the message
        function sendMessage(message) {
            // Display the user's message
            const userMessage = document.createElement("div");
            userMessage.className = "message user";
            userMessage.textContent = message;
            chatContainer.appendChild(userMessage);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // Handle bad words
            if (badWords.some((word) => message.toLowerCase().includes(word))) {
                const botMessage = document.createElement("div");
                botMessage.className = "message bot";
                botMessage.textContent = "You are marked as 'Human'. Please avoid using bad words.";
                chatContainer.appendChild(botMessage);
                return;
            }

            // Save the user's name if it's their first visit
            if (isFirstVisit) {
                localStorage.setItem(localStorageKey, message);
                isFirstVisit = false;
                const botMessage = document.createElement("div");
                botMessage.className = "message bot";
                botMessage.textContent = `Nice to meet you, ${message}! How can I assist you today?`;
                chatContainer.appendChild(botMessage);
                return;
            }

            // Call the hidden API (replacing OpenAI)
            fetch(apiEndpoint, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-3.5-turbo",  // You can still use OpenAI model names if using the correct API
                    messages: [{ role: "user", content: message }]
                })
            })
                .then((response) => response.json())
                .then((data) => {
                    const reply = data.choices[0].message.content;
                    const botMessage = document.createElement("div");
                    botMessage.className = "message bot";
                    botMessage.textContent = reply;
                    chatContainer.appendChild(botMessage);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                });
        }

        // Initial setup
        function init() {
            if (isFirstVisit) {
                typeWriterEffect("Welcome To PrimeGPT", welcomeMessage, () => {
                    const botMessage = document.createElement("div");
                    botMessage.className = "message bot";
                    botMessage.textContent = "Hi Dear, What is your name?";
                    chatContainer.appendChild(botMessage);
                });
            } else {
                const userName = localStorage.getItem(localStorageKey);
                const botMessage = document.createElement("div");
                botMessage.className = "message bot";
                botMessage.textContent = `Welcome back, ${userName}! How can I assist you today?`;
                chatContainer.appendChild(botMessage);
            }
        }

        // Button event listener
        sendButton.addEventListener("click", () => {
            const message = userInput.value.trim();
            if (message !== "") {
                sendMessage(message);
                userInput.value = "";
            }
        });

        // Enter key listener
        userInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
                sendButton.click();
            }
        });

        init();
    </script>
</body>
</html>
